}
else {
max(idxCor, na.rm = TRUE)
}
idxCor[fleet.idx, colnames(idxCor) %in% rownames(m)][whichCorOK] <<- nextIdx:(nextIdx +
length(thisCorList) - 1)
}
}
if (!is.null(residual.fleet)) {
doone(residual.fleet) ## updates dat with this fleet info
type <- c(type, 0)
time <- c(time, 0)
name <- c(name, "Residual catch")
}
if (!is.null(fleets)) {
if (is.data.frame(fleets) | is.matrix(fleets)) {
doone(fleets)
type <- c(type, 1) ## 1 means fishery fleet
time <- c(time, 0)
name <- c(name, "Comm fleet")
}
else {
dummy <- lapply(fleets, doone)
type <- c(type, rep(1, length(fleets)))
time <- c(time, rep(0, length(fleets)))
name <- c(name, strtrim(gsub("\\s", "", names(dummy)),
50))
}
}
is.data.frame(fleets)
is.matrix(fleets)
fleets
class(fleet)
class(fleets)
dummy <- lapply(fleets, doone)
cn[-"Yr"]
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
add_rownames(Yr)
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
rownames_to_column(Yr)
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
tibble::rownames_to_column(Yr)
?tibble::rownames_to_column
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
`rownames<-`(Yr)
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
`rownames<-`(.$Yr)
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
group_split(Fleet_Name) %>%
`rownames<-`(.$Yr)
## METHOD 2 [SAM]
cn <- ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
group_split(Fleet_Name) %>%
`rownames<-`(.$Yr)
cn[[1]]
row.names(cn[[1]])
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
group_split(Fleet_Name) %>% tibble::column_to_rownames('Yr')
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%  tibble::column_to_rownames('Yr') %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
group_split(Fleet_Name) %>%
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%  tibble::column_to_rownames('Yr') %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
group_split(Fleet_Name)
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
group_split(Fleet_Name) %>%
tibble::column_to_rownames('Yr')
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
group_split(Fleet_Name) %>% data.frame() %>%
tibble::column_to_rownames('Yr')
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
data.frame() %>%   group_split(Fleet_Name) %>%
tibble::column_to_rownames('Yr')
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
data.frame() %>%
tibble::column_to_rownames('Yr') %>%  group_split(Fleet_Name)
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
data.frame() %>%   group_split(Fleet_Name)  %>% data.frame() %>%
tibble::column_to_rownames('Yr')
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
data.frame() %>%
tibble::column_to_rownames('Yr') %>%   group_split(Fleet_Name)
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
group_split(Fleet_Name) %>% data.frame() %>%
tibble::column_to_rownames('Yr') %>%   group_split(Fleet_Name)
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
group_split(Fleet_Name) %>% data.frame() %>%
tibble::column_to_rownames('Yr')
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
group_split(Fleet_Name) %>% data.frame() %>% select(Fleet_Name, Obs) %>%
tibble::column_to_rownames('Yr')
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
group_split(Fleet_Name) %>% data.frame() %>%
tibble::column_to_rownames('Yr') %>%  select(Fleet_Name, Obs) %>% group_split(Fleet_Name)
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
group_split(Fleet_Name) %>% data.frame() %>%
tibble::column_to_rownames('Yr')
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
group_split(Fleet_Name) %>% data.frame() %>%
tibble::column_to_rownames('Yr') %>%  select(Fleet_Name, Obs)
ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
group_split(Fleet_Name) %>% data.frame() %>%
tibble::column_to_rownames('Yr') %>%  select(Fleet_Name, Obs) %>%
group_split(Fleet_Name)
## METHOD 2 [SAM]
cn <- ccbase$catch %>%
select(Fleet_Name, Yr, Obs, ret_bio) %>%
mutate(discard = Obs-ret_bio) %>%
select(Fleet_Name, Yr, Obs) %>%
# tidyr::pivot_wider(names_from = Fleet_Name,  values_from = Obs) %>%
# group_split(Fleet_Name) %>% data.frame() %>%
#   tibble::column_to_rownames('Yr') %>%
# select(Fleet_Name, Obs) %>%
group_split(Fleet_Name)
nm
class(nm)
class(Cw)
class(cw)
cw
read.ices("./input/ices_testing/survey.dat")
class(surveys)
class(surveys[[1]])
xaringan:::inf_mr()
wij <- matrix(0.4,0.2,0.15,0.05,0.1)
dd
wij <- matrix(0.4,0.2,0.15,0.05,0.1)
wij <- matrix(c(0.4,0.2,0.15,0.05,0.1))
wij
wij <- matrix(c(0.4,0.2,0.15,0.05,0.1), nrow = 1)
wij
sum(wij)
wij <- matrix(c(0.4,0.2,0.15,0.05,0.2), nrow = 1)
sum(wij)
Rk <- runif(3,75,115)
Rk
Rk <- matrix(c(runif(3,75,115), nrow = 3))
rik
rk
Rk
?runif
Rk <- matrix(c(runif(3,75,115)), nrow = 3)
rk <- matrix(c(runif(3,75,115)), nrow = 3)
rk
wij%%rk
apply(rk,1,FUN = function(x) x*2)
Ri = matrix(NA)
for(i in 1:length(wij)){
Ri[i] <- sum(apply(rk,1,FUN = function(x) x*wij[i]))
}
sum(Ri) == sum(rk) ## partitioned recruitment should equal total
## reshape survey datatable ----
surv <-  read.csv("./input/raw/Indices_SS3_2020-01-23v3.csv")
head(surv)
unique(surv$Fleet)
?pivot_wider
require(tidry)
require(tidyr)
?pivot_wider
surv %>%
filter(Fleet != 'AllAreas' & Fleet 1= "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_Metric_Tons), Epsilon = SD_log) %>%
select(Yr, Fleet, By, Epsilon) %>%
pivot_wider(., values_from = c(By, Epsilon), names_from = Fleet)
require(dplyr)
surv %>%
filter(Fleet != 'AllAreas' & Fleet 1= "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_Metric_Tons), Epsilon = SD_log) %>%
select(Yr, Fleet, By, Epsilon) %>%
pivot_wider(., values_from = c(By, Epsilon), names_from = Fleet)
surv %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_Metric_Tons), Epsilon = SD_log) %>%
select(Yr, Fleet, By, Epsilon) %>%
pivot_wider(., values_from = c(By, Epsilon), names_from = Fleet)
head*surv
head(surv)
surv %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Yr, Fleet, By, Epsilon) %>%
pivot_wider(., values_from = c(By, Epsilon), names_from = Fleet)
surv %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Year, Fleet, By, Epsilon) %>%
pivot_wider(., values_from = c(By, Epsilon), names_from = Fleet)
surv %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Year, Fleet, Epsilon) %>%
pivot_wider(., values_from = c(Epsilon), names_from = Fleet)
surv %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Year, Fleet, Epsilon)
surv %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Year, Fleet, Epsilon) %>%
pivot_wider(., values_from = c("Epsilon"), names_from = "Fleet")
surv %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Year, Fleet, Epsilon) %>%
pivot_wider(., values_from = c("Epsilon"), names_from = "Fleet") %>%head()
surv %>% filter(Year == 1980)
surv %>% filter(Year == 1992)
surv %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log, UID = paste(Year,Fleet)) %>%
select(Year, Fleet, Epsilon, UID) %>%
pivot_wider(., values_from = c("Epsilon"), names_from = "Fleet", id_cols = UID)
surv %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Year, Fleet, By) %>%
pivot_wider(., values_from = By, names_from = Fleet)
surv %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log, UID = paste(Year,Fleet)) %>%
select(Year, Fleet, By, UID) %>%
pivot_wider(., values_from = By, names_from = Fleet, id_cols = UID)
surv %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Year, Fleet, By)
surv %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Year, Fleet, By) %>%
pivot_wider(., values_from = By, names_from = Fleet, id_cols = UID)
surv %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Year, Fleet, By) %>%
pivot_wider(., values_from = By, names_from = Fleet)
surv %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Year, Fleet, By) %>%
pivot_wider(., values_from = By, names_from = Fleet) %>% data.frame()
subset(surv, Year == 1980)
]
surv %>%
distinct()
surv %>%
distinct() %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Year, Fleet, By) %>%
pivot_wider(., values_from = By, names_from = Fleet) %>% data.frame()
## reshape survey datatable ----
surv <-  read.csv("./input/raw/Indices_SS3_2020-01-23v3.csv")
surv_by <- surv %>%
distinct() %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Year, Fleet, By) %>%
pivot_wider(., values_from = By, names_from = Fleet) %>% data.frame()
names(surv_by)[4,5] <- c("AK (A1 + A2)", "AK (A1)")
surv_eps <-surv %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log, UID = paste(Year,Fleet)) %>%
select(Year, Fleet, Epsilon, UID) %>%
pivot_wider(., values_from = c("Epsilon"), names_from = "Fleet", id_cols = UID)
names(surv_eps)[4,5] <- c("AK (A1 + A2)", "AK (A1)")
write.csv(surv_eps,"./tables/Survey_epsilon_byM.csv",row.names = FALSE)
write.csv(surv_by,"./tables/Survey_biomass_byM.csv",row.names = FALSE)
surv_by <- surv %>%
distinct() %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Year, Fleet, By) %>%
pivot_wider(., values_from = By, names_from = Fleet) %>% data.frame()
names(surv_by)[4,5] <- c("AK (A1 + A2)", "AK (A1)")
names(surv_by)
surv_by <- surv %>%
distinct() %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Year, Fleet, By) %>%
pivot_wider(., values_from = By, names_from = Fleet) %>% data.frame()
names(surv_by)[c(4,5)] <- c("AK (A1 + A2)", "AK (A1)")
surv_eps <-surv %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log, UID = paste(Year,Fleet)) %>%
select(Year, Fleet, Epsilon, UID) %>%
pivot_wider(., values_from = c("Epsilon"), names_from = "Fleet", id_cols = UID)
names(surv_eps)[c(4,5)] <- c("AK (A1 + A2)", "AK (A1)")
surv_eps <- surv %>%
distinct() %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Year, Fleet, Epsilon,) %>%
pivot_wider(., values_from = c("Epsilon"), names_from = "Fleet")
surv_eps <- surv %>%
distinct() %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Year, Fleet, Epsilon) %>%
pivot_wider(., values_from = c("Epsilon"), names_from = "Fleet")
write.csv(surv_eps,"./tables/Survey_epsilon_byM.csv",row.names = FALSE)
write.csv(surv_by,"./tables/Survey_biomass_byM.csv",row.names = FALSE)
write.csv(surv_eps,"./_writing/tables/Survey_epsilon_byM.csv",row.names = FALSE)
write.csv(surv_by,"./_writing/tables/Survey_biomass_byM.csv",row.names = FALSE)
surv_eps <- surv %>%
distinct() %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = SD_log) %>%
select(Year, Fleet, Epsilon) %>%
pivot_wider(., values_from = c("Epsilon"), names_from = "Fleet")
names(surv_eps)[c(4,5)] <- c("AK (A1 + A2)", "AK (A1)")
write.csv(surv_eps,"./_writing/tables/Survey_epsilon_byM.csv",row.names = FALSE)
surv_eps <- surv %>%
distinct() %>%
filter(Fleet != 'AllAreas' & Fleet != "Eastern_Bering_Sea") %>%
mutate(By = round(Estimate_metric_tons), Epsilon = round(SD_log,3)) %>%
select(Year, Fleet, Epsilon) %>%
pivot_wider(., values_from = c("Epsilon"), names_from = "Fleet")
names(surv_eps)[c(4,5)] <- c("AK (A1 + A2)", "AK (A1)")
write.csv(surv_eps,"./_writing/tables/Survey_epsilon_byM.csv",row.names = FALSE)
ypreds <- read.csv("./input/raw/SAB_predicts_2020-04-17.csv")
ypreds$gamREG <- ypreds$gamREG
levels(ypreds$REG) <- c('Alaska','British Columbia','US West Coast')
levels(ypreds$Sex) <- c('Females','Males')
levels(ypreds$Period) <- c('pre-2010','2010-2018','All Years')
ypreds <- read.csv("./input/raw/SAB_predicts_2020-04-17.csv")
levels(ypreds$REG)
levels(ypreds$Sex)
head(ypreds)
ypreds <- read.csv("./input/raw/SAB_predicts_2020-04-17.csv")
levels(ypreds$REG)
# ypreds$gamREG <- ypreds$gamREG
levels(ypreds$REG) <- c('Alaska','British Columbia','US West Coast')
levels(ypreds$Sex) <- c('Females','Males')
levels(ypreds$Period) <- c('pre-2010','2010-2018','All Years')
for(i in 1:nrow(ypreds)){
ypreds$Period[i] <-  ifelse(length(grep('pool', ypreds$cREG[i])) == 1,
'All Years', paste(ypreds$Period[i]))
}
fd_summary_gamREG <- ypreds %>%
# filter(Age < 75) %>%
group_by(Age, Sex, gamREG,Period) %>%
dplyr::summarise(meanL = mean(Length_cm), sdmeanL = sd(Length_cm), meanPred = mean(Predicted))
saveRDS(fd_summary_gamREG, file = "./_writing/figures/OMGrowthCurves.Rdata")
ggplot(readRDS("./_writing/figures/OMGrowthCurves.Rdata"), aes(x = Age, col = gamREG, group = gamREG)) +
kaputils::theme_mk(base_size = 16) +
scale_color_manual(values = cbbPalette) +
scale_fill_manual(values = cbbPalette) +
scale_alpha(guide = 'none') +
scale_y_continuous(limits = c(0,110)) +
scale_x_continuous(limits = c(0,65)) +
geom_line(aes(y = meanPred, col = gamREG), lwd = 1.1)+
labs(y = 'Length (cm)', x= 'Age (years)', col = "") +
facet_wrap(~Sex +Period, ncol = 4)
require(ggplot2)
ggplot(readRDS("./_writing/figures/OMGrowthCurves.Rdata"), aes(x = Age, col = gamREG, group = gamREG)) +
kaputils::theme_mk(base_size = 16) +
scale_color_manual(values = cbbPalette) +
scale_fill_manual(values = cbbPalette) +
scale_alpha(guide = 'none') +
scale_y_continuous(limits = c(0,110)) +
scale_x_continuous(limits = c(0,65)) +
geom_line(aes(y = meanPred, col = gamREG), lwd = 1.1)+
labs(y = 'Length (cm)', x= 'Age (years)', col = "") +
facet_wrap(~Sex +Period, ncol = 4)
cbbPalette <- c("#000000", "#009E73", "#e79f00", "#9ad0f3",
"#0072B2", "#D55E00", "#CC79A7", "navy", "#F0E442" )
ggplot(readRDS("./_writing/figures/OMGrowthCurves.Rdata"), aes(x = Age, col = gamREG, group = gamREG)) +
kaputils::theme_mk(base_size = 16) +
scale_color_manual(values = cbbPalette) +
scale_fill_manual(values = cbbPalette) +
scale_alpha(guide = 'none') +
scale_y_continuous(limits = c(0,110)) +
scale_x_continuous(limits = c(0,65)) +
geom_line(aes(y = meanPred, col = gamREG), lwd = 1.1)+
labs(y = 'Length (cm)', x= 'Age (years)', col = "") +
facet_wrap(~Sex +Period, ncol = 4)
head(fd_summary_gamREG)
ggsave(plot = last_plot(),
file = "./_writing/figures/OMGrowthCurves.PNG",
height = 8, width = 10, unit = 'in')
ggplot(readRDS("./_writing/figures/OMGrowthCurves.Rdata"), aes(x = Age, col = gamREG, group = gamREG)) +
kaputils::theme_mk(base_size = 16) +
scale_color_manual(values = cbbPalette,
labels = c('Stock R1 (South CC)',
'Stock R2 (North CC/South BC)',
'Stock R3 (BC)',
'Stock R4 (West BC/AK Gulf)',
'Stock R5 (West Gulf/Aleutians)')) +
scale_fill_manual(values = cbbPalette,
labels = c('Stock R1 (South CC)',
'Stock R2 (North CC/South BC)',
'Stock R3 (BC)',
'Stock R4 (West BC/AK Gulf)',
'Stock R5 (West Gulf/Aleutians)')) +
scale_alpha(guide = 'none') +
scale_y_continuous(limits = c(0,110)) +
scale_x_continuous(limits = c(0,65)) +
geom_line(aes(y = meanPred, col = gamREG), lwd = 1.1)+
labs(y = 'Length (cm)', x= 'Age (years)', col = "") +
facet_wrap(~Sex +Period, ncol = 4)
ggplot(readRDS("./_writing/figures/OMGrowthCurves.Rdata"), aes(x = Age, col = gamREG, group = gamREG)) +
kaputils::theme_mk(base_size = 16) + theme(legend.position = 'right') +
scale_color_manual(values = cbbPalette,
labels = c('Stock R1 (South CC)',
'Stock R2 (North CC/South BC)',
'Stock R3 (BC)',
'Stock R4 (West BC/AK Gulf)',
'Stock R5 (West Gulf/Aleutians)')) +
scale_fill_manual(values = cbbPalette,
labels = c('Stock R1 (South CC)',
'Stock R2 (North CC/South BC)',
'Stock R3 (BC)',
'Stock R4 (West BC/AK Gulf)',
'Stock R5 (West Gulf/Aleutians)')) +
scale_alpha(guide = 'none') +
scale_y_continuous(limits = c(0,110)) +
scale_x_continuous(limits = c(0,65)) +
geom_line(aes(y = meanPred, col = gamREG), lwd = 1.1)+
labs(y = 'Length (cm)', x= 'Age (years)', col = "") +
facet_wrap(~Sex +Period, ncol = 4)
ggsave(plot = last_plot(),
file = "./_writing/figures/OMGrowthCurves.PNG",
height = 8, width = 10, unit = 'in')
xaringan:::inf_mr()
xaringan:::inf_mr()
